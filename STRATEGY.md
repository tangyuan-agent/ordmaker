# 抢购策略 - 250 NFT 激烈竞争

## 💥 竞争现实

```
供应: 250 个 NFT
窗口: 2 小时（但实际可能 <5 秒售罄）
竞争者: Twitter 10k 粉丝，预计 500-2000 人同时抢
成功率: 62 / 2000 = 3.1%
```

## ⚡ 你的优势

```
✅ VPS 延迟极低: 1.6ms
✅ 到 API 时间: 173ms
✅ Hash 率: ~180k H/s
✅ PoW 平均: 0.3秒

预计总耗时: 1-1.5 秒
→ 在前 10-20% 完成者中
```

## 🎯 推荐策略

### 策略 A: 稳健型（推荐）

```bash
# 使用定时脚本，18:00准时启动
chmod +x scripts/schedule-mint.sh
./scripts/schedule-mint.sh

# 特点：
# - 自动时间同步
# - 提前2秒开始
# - 失败自动降级（4→1）
# - 成功率: 中等
```

### 策略 B: 激进型

```bash
# 手动执行，17:59:58启动
# 在 17:59:57 运行：
node scripts/mint-fast.js 4

# 特点：
# - 最早到达
# - 风险：可能太早被拒绝
# - 成功率: 高（如果不被限制）
```

### 策略 C: 分散型

```bash
# 同时发起2次请求（不同 quantity）
# 终端1：
node scripts/mint-fast.js 4 &
# 终端2（延迟0.2秒）：
sleep 0.2 && node scripts/mint-fast.js 1

# 特点：
# - 双重保险
# - 可能触发 rate limit
# - 成功率: 中高
```

## 🔧 关键优化点

### 1. 时间同步（最重要！）

```bash
# 提前5分钟同步时间
sudo ntpdate -u time.google.com

# 或使用 chrony
sudo chronyc -a makestep
```

**时间误差 = 竞争劣势**
- 慢 1 秒 = 可能错过 50% 名额
- 慢 2 秒 = 可能已售罄

### 2. 网络预热

```javascript
// mint-fast.js 已包含
// 提前建立 HTTPS 连接，减少 TLS 握手时间
await warmupConnection();
```

### 3. PoW 优化

```javascript
// 内联检查，减少函数调用
if (hash[0] === '0' && hash[1] === '0' && hash[2] === '0' && hash[3] === '0')

// 而不是：
if (hash.startsWith('0000'))  // 稍慢
```

### 4. 最小化日志

```
普通版本：大量日志输出 → 慢 50-100ms
高速版本：只输出关键信息 → 节省时间
```

## 📊 时间预算分析

```
操作                    耗时      累计
─────────────────────────────────────
预热连接                50ms      0.05s
请求 challenge          150ms     0.20s
PoW 求解               300ms     0.50s
提交 nonce             150ms     0.65s
签名 PSBT              100ms     0.75s
广播交易               150ms     0.90s
─────────────────────────────────────
总计（预估）：                   0.9-1.5s
```

**与其他竞争者对比：**
```
你的时间: 0.9-1.5s
普通用户: 2-5s（慢 PoW、高延迟）
新手用户: 5-30s（手动操作）
```

## ⚠️ 可能的障碍

### 1. Rate Limiting
```
问题: API 可能限制每IP请求频率
应对: 只发一次请求，不重试
```

### 2. 队列系统
```
问题: 服务器可能按到达顺序排队
应对: 尽早到达（17:59:58）
```

### 3. PoW 难度动态调整
```
问题: 服务器可能在高峰期提高难度
应对: 使用高性能 VPS（已有）
```

### 4. PSBT 构建延迟
```
问题: 服务器生成 PSBT 需要时间
应对: 无法优化，所有人都受影响
```

## 🎲 最终建议

**推荐方案：**
```bash
# 17:55 准备
cd /root/.openclaw/workspace/skills/whoami-ordinals

# 17:56 时间同步
sudo ntpdate -u time.google.com

# 17:57 启动定时脚本
./scripts/schedule-mint.sh

# 然后等待...
```

**备用方案（如果失败）：**
1. 立即重试 quantity=1
2. 等待下一个 Phase（可能有）
3. 二级市场购买

**心理准备：**
- 成功率：3-10%（现实估计）
- 即使失败也不奇怪（950人会失败）
- 你的配置已经是最优的了

## 🍀 运气因素

**无法控制的因素：**
```
- 其他人的网络延迟
- 服务器处理顺序
- PoW 随机性（可能需要 0.1s 或 2s）
- 区块链网络状况
```

**已优化的因素：**
```
✅ VPS 延迟（1.6ms）
✅ 代码效率（最小化）
✅ PoW 性能（180k H/s）
✅ 时间同步（NTP）
✅ 连接预热（提前建立）
```

## 🎯 执行清单

```
□ 检查主网地址余额（>30,000 sats）
□ 测试 mint-fast.js 能运行（不会真实铸造）
□ 同步系统时间
□ 17:59:55 运行 schedule-mint.sh
□ 保持终端开启，等待结果
□ 记录交易ID（如果成功）
```

---

**Good luck! 🍀**

记住：你已经做了所有能做的优化。剩下的就是运气了。
